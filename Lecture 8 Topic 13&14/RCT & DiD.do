


*********************************STAR Case*************************************

use "star.dta", clear

*1
*(1)

summarize sck, detail

/*

                          treatment
-------------------------------------------------------------
      Percentiles      Smallest
 1%            0              0
 5%            0              0
10%            0              0       Obs               5,749
25%            0              0       Sum of Wgt.       5,749

50%            0                      Mean           .3014437
                        Largest       Std. Dev.      .4589249
75%            1              1
90%            1              1       Variance        .210612
95%            1              1       Skewness       .8653858
99%            1              1       Kurtosis       1.748893



mean = 0.3014 (means 30.14% from small class)
standard deviation = 0.4589
min = 0
max = 1


*/

*(2)

reg tscore sck

/*
      Source |       SS           df       MS      Number of obs   =     5,749
-------------+----------------------------------   F(1, 5747)      =     42.71
       Model |  231405.098         1  231405.098   Prob > F        =    0.0000
    Residual |    31134394     5,747  5417.50375   R-squared       =    0.0074
-------------+----------------------------------   Adj R-squared   =    0.0072
       Total |  31365799.1     5,748  5456.81961   Root MSE        =    73.604

------------------------------------------------------------------------------
     tscorek |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         sck |   13.82568   2.115435     6.54   0.000      9.67863    17.97273
       _cons |   918.2251   1.161456   790.58   0.000     915.9482     920.502
------------------------------------------------------------------------------

*/



*(3)

summarize tscore if sck == 1
summarize tscore if sck == 0
*mean of tscore of control group is 918.2251 with is intercept of regression
display 932.0508-918.2251
*13.8275

/*
. summarize tscore if sck == 1

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
     tscorek |      1,733    932.0508    76.42836        747       1253

. summarize tscore if sck == 0

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
     tscorek |      4,016    918.2251    72.35114        635       1253


*/



*(4)
/*
It implies that compared with control group (big class), treatment gropu (small class) has significantly better score (13.8275 higher) at the signficance level of 1%. Therefore, class size reuction is able to enhance students' performance

*/


reg tscore sck, r
*or
reg tscore sck, vce(robust)


/*

Linear regression                               Number of obs     =      5,749
                                                F(1, 5747)        =      40.90
                                                Prob > F          =     0.0000
                                                R-squared         =     0.0074
                                                Root MSE          =     73.604

------------------------------------------------------------------------------
             |               Robust
     tscorek |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         sck |   13.82568   2.161814     6.40   0.000     9.587709    18.06365
       _cons |   918.2251   1.141747   804.23   0.000     915.9868    920.4634
------------------------------------------------------------------------------

tscore = 918.2251 + 13.82568 * sck

why does the coefficient remain same? robust standard error affects standard error (usually larger) hence decreases t statistics, so you have less chance to reject H0. However, it does not affect coefficient
why does the standard error change? When robust standard error is used, more standard error.


*/






*(5)
reg tscore sck boy freelunk totexpk, r
/*
. reg tscore sck boy freelunk totexpk

Linear regression                               Number of obs     =      5,749
                                                F(4, 5744)        =     158.33
                                                Prob > F          =     0.0000
                                                R-squared         =     0.0980
                                                Root MSE          =     70.182

------------------------------------------------------------------------------
             |               Robust
     tscorek |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         sck |   13.82387   2.079386     6.65   0.000     9.747488    17.90025
         boy |  -13.80328   1.855061    -7.44   0.000     -17.4399   -10.16666
    freelunk |  -39.09762   1.856645   -21.06   0.000    -42.73734   -35.45789
     totexpk |   1.182883   .1663657     7.11   0.000     .8567439    1.509023
       _cons |   933.1884    2.40075   388.71   0.000      928.482    937.8948
------------------------------------------------------------------------------


tscore = 933.1884 + 13.82387 * sck - 13.80328 * boy - 390.09762 * freelunk + 1.182883 * totexpk
*/



reg tscore sck boy freelunk totexpk schidkn, r

/*

Linear regression                               Number of obs     =      5,749
                                                F(5, 5743)        =     126.74
                                                Prob > F          =     0.0000
                                                R-squared         =     0.0981
                                                Root MSE          =     70.184

------------------------------------------------------------------------------
             |               Robust
     tscorek |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         sck |   13.86652   2.080349     6.67   0.000     9.788247    17.94479
         boy |  -13.76219   1.854995    -7.42   0.000    -17.39868   -10.12571
    freelunk |  -39.37077   1.885405   -20.88   0.000    -43.06688   -35.67467
     totexpk |   1.191692   .1665337     7.16   0.000     .8652233    1.518161
     schidkn |   -.035019   .0404287    -0.87   0.386    -.1142744    .0442364
       _cons |   934.5993   2.914508   320.67   0.000     928.8858    940.3129
------------------------------------------------------------------------------


tscore = 934.60 + 13.87 * sck - 13.76 * boy -39.37 * freelunk + 1.19 * totexpk -0.035019 * schidkn
Including schidkn (school id) is not necessary, becuase school id is not in specific order (from smallest to largest means worst to best school). However, in this case id is just id, it does not have any order meaning. It makes more sense if replace school id with dummy variable id1, id2, id3...

*/

*(6)
reg tscore sck boy freelunk totexpk i.schidkn,r
*or generate id dummy variables then run the regression
tab schidkn, gen(id)
reg tscore sck boy freelunk totexpk id*, r



/*
Linear regression                               Number of obs     =      5,749
                                                F(82, 5666)       =      31.76
                                                Prob > F          =     0.0000
                                                R-squared         =     0.2847
                                                Root MSE          =     62.925

------------------------------------------------------------------------------
             |               Robust
     tscorek |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         sck |   15.13308    1.91271     7.91   0.000     11.38344    18.88273
         boy |  -11.99972   1.679629    -7.14   0.000    -15.29244   -8.707005
    freelunk |  -37.31735   1.954444   -19.09   0.000    -41.14881   -33.48589
     totexpk |   .6580954   .1656585     3.97   0.000     .3333414    .9828495
             |
     schidkn |
          2  |  -62.95187   9.254287    -6.80   0.000    -81.09381   -44.80992
          3  |   -4.50532   8.982824    -0.50   0.616    -22.11509    13.10445
          4  |  -48.34491   8.884962    -5.44   0.000    -65.76284   -30.92698
          5  |  -42.79214   11.86266    -3.61   0.000    -66.04749   -19.53679
          6  |  -29.24221   10.21934    -2.86   0.004    -49.27603   -9.208387
          7  |   27.58815   10.20849     2.70   0.007     7.575612     47.6007
          8  |  -31.92845   8.642079    -3.69   0.000    -48.87023   -14.98666
          9  |   6.197721   9.346251     0.66   0.507    -12.12451    24.51995
         10  |   34.43835   12.65001     2.72   0.007     9.639484    59.23721
         11  |   59.62928   13.04385     4.57   0.000     34.05834    85.20022
         12  |   16.33423   10.77679     1.52   0.130    -4.792404    37.46086
         13  |   40.50619   11.53666     3.51   0.000     17.88993    63.12246
         14  |    -10.532   12.93928    -0.81   0.416    -35.89794    14.83393
         15  |  -29.22361   9.526641    -3.07   0.002    -47.89948   -10.54775
         16  |  -50.58198    8.78562    -5.76   0.000    -67.80516    -33.3588
         17  |  -19.67736    10.7853    -1.82   0.068    -40.82069    1.465959
         18  |  -38.92569   8.976039    -4.34   0.000    -56.52216   -21.32922
         19  |  -3.792788   9.469881    -0.40   0.689    -22.35738     14.7718
         20  |  -17.92053   9.769135    -1.83   0.067    -37.07177    1.230713
         21  |   27.79396   10.25027     2.71   0.007       7.6995    47.88842
         22  |   7.597869   9.864025     0.77   0.441     -11.7394    26.93513
         23  |   34.63861   11.34798     3.05   0.002     12.39222      56.885
         24  |  -35.43882   9.004912    -3.94   0.000     -53.0919   -17.78575
         25  |  -17.80453   10.74095    -1.66   0.097    -38.86091    3.251841
         26  |  -46.24803   9.728476    -4.75   0.000    -65.31957    -27.1765
         27  |   40.80783   9.066897     4.50   0.000     23.03324    58.58242
         28  |  -21.74875   9.378488    -2.32   0.020    -40.13418   -3.363328
         29  |   4.447426   10.30199     0.43   0.666    -15.74842    24.64328
         30  |   95.01128   11.99737     7.92   0.000     71.49184    118.5307
         31  |   32.10887   11.71163     2.74   0.006     9.149601    55.06815
         32  |  -51.26803    8.70849    -5.89   0.000    -68.34001   -34.19606
         33  |  -48.80195   8.948778    -5.45   0.000    -66.34498   -31.25892
         34  |  -44.30777   9.795788    -4.52   0.000    -63.51126   -25.10427
         35  |  -39.61369   10.02498    -3.95   0.000    -59.26649   -19.96089
         36  |   -18.0831   10.59533    -1.71   0.088      -38.854    2.687794
         37  |  -10.11181   9.329099    -1.08   0.278    -28.40042    8.176792
         38  |   2.350684   13.10842     0.18   0.858    -23.34683     28.0482
         39  |  -8.184451   11.11241    -0.74   0.461    -29.96904    13.60013
         40  |    35.5171   11.89289     2.99   0.003     12.20248    58.83171
         41  |   41.89264   12.64675     3.31   0.001     17.10017    66.68511
         42  |  -8.771361   15.11578    -0.58   0.562    -38.40407    20.86135
         43  |  -22.64449   11.13448    -2.03   0.042    -44.47232   -.8166551
         44  |   28.12715   10.64583     2.64   0.008     7.257252    48.99706
         45  |  -77.77702   9.333948    -8.33   0.000    -96.07513   -59.47891
         46  |  -19.61059   10.04807    -1.95   0.051    -39.30865    .0874735
         47  |  -18.64379    10.6331    -1.75   0.080    -39.48874     2.20115
         48  |   4.426016   9.917615     0.45   0.655    -15.01631    23.86834
         49  |     13.822   10.55386     1.31   0.190    -6.867599     34.5116
         50  |   4.760884   9.902313     0.48   0.631    -14.65144    24.17321
         51  |   7.617177   9.613829     0.79   0.428    -11.22961    26.46396
         52  |   20.73267   12.74606     1.63   0.104    -4.254476    45.71982
         53  |   -56.7458    9.75361    -5.82   0.000    -75.86661   -37.62499
         54  |  -5.661284   11.43097    -0.50   0.620    -28.07037     16.7478
         55  |  -34.96929   9.629224    -3.63   0.000    -53.84626   -16.09233
         56  |  -85.70071   10.18184    -8.42   0.000     -105.661   -65.74041
         57  |  -45.24519   10.71736    -4.22   0.000    -66.25531   -24.23507
         58  |   10.96726   8.986402     1.22   0.222    -6.649527    28.58405
         59  |   10.73209   11.70233     0.92   0.359    -12.20896    33.67315
         60  |  -31.23801   9.981154    -3.13   0.002     -50.8049   -11.67113
         61  |  -33.34087     9.7015    -3.44   0.001    -52.35952   -14.32221
         62  |  -29.59801   8.922343    -3.32   0.001    -47.08921    -12.1068
         63  |   20.32695    9.45961     2.15   0.032     1.782493     38.8714
         64  |  -19.12071   10.27586    -1.86   0.063    -39.26532    1.023905
         65  |   19.10996   12.77739     1.50   0.135    -5.938615    44.15854
         66  |   -35.4706   9.209928    -3.85   0.000    -53.52559   -17.41562
         67  |  -5.705038   12.49696    -0.46   0.648    -30.20386    18.79378
         68  |   36.87931   10.04441     3.67   0.000     17.18842    56.57021
         69  |   23.05343   11.04515     2.09   0.037     1.400702    44.70615
         70  |  -10.44435   10.06309    -1.04   0.299    -30.17187    9.283165
         71  |  -35.39365   9.527428    -3.71   0.000    -54.07105   -16.71624
         72  |   23.49608   9.831972     2.39   0.017     4.221649     42.7705
         73  |   4.522081   11.13306     0.41   0.685    -17.30298    26.34714
         74  |   6.237841   11.51094     0.54   0.588    -16.32801    28.80369
         75  |   2.120849   11.56332     0.18   0.854    -20.54768    24.78938
         76  |  -15.42364   9.864513    -1.56   0.118    -34.76186    3.914582
         78  |  -47.40257   9.837262    -4.82   0.000    -66.68737   -28.11777
         79  |  -11.05908   10.61702    -1.04   0.298    -31.87251    9.754338
         80  |  -3.249778   12.18817    -0.27   0.790    -27.14325    20.64369
             |
       _cons |    943.701   7.388943   127.72   0.000     929.2159    958.1862
------------------------------------------------------------------------------



*/


*(7)

/*

If the assignment is completely random across schools, then the coefficients of dummies should not be significant (no tscore difference between benchmark school and dummy schools), but in this case, randomisation is at school level, tscore may be different across schools.

*/


*(8)

reg sck boy freelunk totexpk, r
test boy freelunk totexpk

/*

. reg sck boy freelunk totexpk, r
Linear regression                               Number of obs     =      5,749
                                                F(3, 5745)        =       3.05
                                                Prob > F          =     0.0273
                                                R-squared         =     0.0015
                                                Root MSE          =     .45869

------------------------------------------------------------------------------
             |               Robust
         sck |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         boy |  -.0009993    .012115    -0.08   0.934    -.0247493    .0227507
    freelunk |  -.0140544   .0120932    -1.16   0.245    -.0377616    .0096527
     totexpk |  -.0029498   .0010457    -2.82   0.005    -.0049998   -.0008998
       _cons |   .3361965   .0147757    22.75   0.000     .3072306    .3651624
------------------------------------------------------------------------------
. test boy freelunk totexpk
 ( 1)  boy = 0
 ( 2)  freelunk = 0
 ( 3)  totexpk = 0

       F(  3,  5745) =    3.05
            Prob > F =    0.0273
			
			

H0: δ1=δ2=δ3
H1: at least one δ!=0
reject H0 if F(calc)>F(α,k,n-k-1)=F(0.05,3,5745)=2.60
F(calc)=MSR/MSE=(SSR/k)/[SSE/(n-k-1)] = 3.05 > 2.60
reject H0 at 5% level
It can be concluded that at 5% level of signfiicance, at least one δ is significantly equal to zero

Therefore the assignment is not random. In this case, teaching experience is significantly negative affect class size. Here, more teaching experience is less likely to teach small class.


*/





*(9)

reg sck boy freelunk totexpk i.schidkn, r
test boy freelunk totexpk 

/*
. reg sck boy freelunk totexpk i.schidkn, r

Linear regression                               Number of obs     =      5,749
                                                F(81, 5667)       =       2.03
                                                Prob > F          =     0.0000
                                                R-squared         =     0.0266
                                                Root MSE          =     .45601

------------------------------------------------------------------------------
             |               Robust
         sck |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         boy |  -.0004134   .0121382    -0.03   0.973     -.024209    .0233822
    freelunk |  -.0096057   .0146521    -0.66   0.512    -.0383294     .019118
     totexpk |  -.0033605   .0012092    -2.78   0.005    -.0057309     -.00099
             |
     schidkn |
          2  |   .1039557    .081345     1.28   0.201    -.0555117    .2634232
          3  |   .1161683   .0691568     1.68   0.093    -.0194055    .2517421
          4  |   .0142737    .073316     0.19   0.846    -.1294537    .1580011
          5  |   .0542761   .0760227     0.71   0.475    -.0947575    .2033098
          6  |   .0415448    .078118     0.53   0.595    -.1115964     .194686
          7  |   .0502168   .0643704     0.78   0.435    -.0759738    .1764074
          8  |    .132142   .0688135     1.92   0.055    -.0027589    .2670429
          9  |   .1252799   .0663907     1.89   0.059    -.0048714    .2554311
         10  |    .035562   .0787581     0.45   0.652    -.1188341    .1899581
         11  |   .0616186   .0769707     0.80   0.423    -.0892734    .2125106
         12  |   .0726788   .0768748     0.95   0.344    -.0780253    .2233828
         13  |   .0497872   .0763283     0.65   0.514    -.0998455      .19942
         14  |   .1785332   .1012373     1.76   0.078    -.0199307    .3769971
         15  |    .232351   .0858343     2.71   0.007     .0640828    .4006191
         16  |   .1211322   .0677492     1.79   0.074    -.0116822    .2539465
         17  |   .2197289   .0788238     2.79   0.005     .0652041    .3742537
         18  |  -.0271006   .0656443    -0.41   0.680    -.1557886    .1015873
         19  |   .1212844   .0702662     1.73   0.084    -.0164643    .2590331
         20  |   .0219501   .0706196     0.31   0.756    -.1164912    .1603915
         21  |   -.014333   .0691642    -0.21   0.836    -.1499214    .1212554
         22  |   .0156169   .0621922     0.25   0.802    -.1063037    .1375374
         23  |   .1632217   .0748304     2.18   0.029     .0165253     .309918
         24  |   .2298819   .0806152     2.85   0.004     .0718452    .3879186
         25  |    .119536   .0811232     1.47   0.141    -.0394966    .2785686
         26  |   .1085681   .0818041     1.33   0.185    -.0517993    .2689354
         27  |  -.0126778   .0607907    -0.21   0.835    -.1318509    .1064952
         28  |   .2221793   .0666956     3.33   0.001     .0914303    .3529283
         29  |   .1102026   .0805624     1.37   0.171    -.0477306    .2681358
         30  |    .063525   .0750334     0.85   0.397    -.0835693    .2106193
         31  |   .0570811   .0809496     0.71   0.481    -.1016111    .2157733
         32  |   .0446469   .0677585     0.66   0.510    -.0881856    .1774794
         33  |   .1087157     .06928     1.57   0.117    -.0270997    .2445311
         34  |   .2370277   .0778546     3.04   0.002      .084403    .3896524
         35  |   .0144109   .0729724     0.20   0.843     -.128643    .1574648
         36  |   .1336748   .0776922     1.72   0.085    -.0186317    .2859813
         37  |   .1011299    .070094     1.44   0.149    -.0362812     .238541
         38  |    .080368   .0839218     0.96   0.338    -.0841509    .2448868
         39  |   .1900436   .0812537     2.34   0.019     .0307553    .3493319
         40  |   .1822511   .0788839     2.31   0.021     .0276084    .3368937
         41  |    .196592   .0786002     2.50   0.012     .0425055    .3506786
         42  |   .1324593   .0831704     1.59   0.111    -.0305866    .2955052
         43  |   .1442749    .076801     1.88   0.060    -.0062844    .2948341
         44  |   .2105788   .0754912     2.79   0.005     .0625872    .3585705
         45  |   .0434475   .0740252     0.59   0.557    -.1016703    .1885652
         46  |   .0362578   .0774216     0.47   0.640    -.1155181    .1880336
         47  |   .0426685   .0767645     0.56   0.578    -.1078193    .1931563
         48  |   .2075981   .0812156     2.56   0.011     .0483845    .3668117
         49  |   .0852551   .0779206     1.09   0.274     -.067499    .2380093
         50  |   .2062287   .0768239     2.68   0.007     .0556244     .356833
         51  |   .1694997   .0655933     2.58   0.010     .0409116    .2980877
         52  |   .0065153   .0765261     0.09   0.932    -.1435051    .1565357
         53  |   .0803938   .0806682     1.00   0.319    -.0777467    .2385343
         54  |   .0695467   .0795161     0.87   0.382    -.0863353    .2254287
         55  |  -.0125047   .0670133    -0.19   0.852    -.1438764     .118867
         56  |   .1166438   .0698408     1.67   0.095    -.0202709    .2535584
         57  |   .1806152   .0804492     2.25   0.025     .0229039    .3383265
         58  |   .1091496   .0694242     1.57   0.116    -.0269484    .2452477
         59  |   .2146969   .0854588     2.51   0.012      .047165    .3822288
         60  |   .2091732    .078402     2.67   0.008     .0554753    .3628712
         61  |   .2207259   .0769726     2.87   0.004     .0698302    .3716216
         62  |   .0978293   .0808667     1.21   0.226    -.0607004    .2563589
         63  |   .0576486   .0648872     0.89   0.374    -.0695552    .1848523
         64  |   .1492562   .0724025     2.06   0.039     .0073197    .2911927
         65  |   .0300511   .0832135     0.36   0.718    -.1330792    .1931813
         66  |   .1053723   .0708502     1.49   0.137    -.0335212    .2442657
         67  |   .0779051   .0877767     0.89   0.375    -.0941708     .249981
         68  |   .1421297   .0694438     2.05   0.041     .0059934    .2782661
         69  |   .0394872   .0759948     0.52   0.603    -.1094917    .1884661
         70  |   .1235291   .0696621     1.77   0.076    -.0130352    .2600935
         71  |    .180787   .0760416     2.38   0.017     .0317162    .3298577
         72  |   .0331575   .0649004     0.51   0.609    -.0940722    .1603871
         73  |   .1841951    .076927     2.39   0.017     .0333888    .3350014
         74  |   .1970229   .0762142     2.59   0.010      .047614    .3464319
         75  |  -.0009773   .0661652    -0.01   0.988    -.1306863    .1287318
         76  |   .1335767   .0709882     1.88   0.060    -.0055874    .2727408
         78  |   .0297663   .0754504     0.39   0.693    -.1181455     .177678
         79  |    .195467   .0795252     2.46   0.014     .0395671    .3513669
         80  |   .0442109   .0777725     0.57   0.570    -.1082528    .1966747
             |
       _cons |   .2312811   .0514696     4.49   0.000     .1303809    .3321812
------------------------------------------------------------------------------



. test boy freelunk totexpk 

 ( 1)  boy = 0
 ( 2)  freelunk = 0
 ( 3)  totexpk = 0

       F(  3,  5667) =    2.71
            Prob > F =    0.0435



H0: γ1=γ2=γ3
H1: at least one γ!=0
reject H0 if F(calc)>F(α,k,n-k-1)=F(0.05,3,5667)=2.60
F(calc)=MSR/MSE=(SSR/k)/[SSE/(n-k-1)] = 2.71 > 2.60
reject H0 at 5% level
It can be concluded that at 5% level of signfiicance, at least one γ is not significantlyequal to zero

Therefore the assignment is not random. In this case, teaching experience is significantly negative affect class size. Here, more teaching experience is less likely to teach small class.


*/







*********************************Worker Compensation Case*************************************



use "injury.dta", clear

*(1)

describe

/*
  obs:         7,150                          
 vars:            30                          14 Aug 2013 17:35
-------------------------------------------------------------------------------------
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------------
durat           float   %9.0g                 duration of benefits
afchnge         byte    %9.0g                 =1 if after change in benefits
highearn        byte    %9.0g                 =1 if high earner
male            byte    %9.0g                 =1 if male
married         byte    %9.0g                 =1 if married
hosp            byte    %9.0g                 =1 if inj. required hosp. stay
indust          byte    %9.0g                 industry
injtype         byte    %9.0g                 type of injury
age             byte    %9.0g                 age at time of injury
prewage         float   %9.0g                 previous weekly wage, 1982 $
totmed          float   %9.0g                 total med. costs, 1982 $
injdes          int     %9.0g                 4 digit injury description
benefit         float   %9.0g                 real dollar value of benefit
ky              byte    %9.0g                 =1 for kentucky
mi              byte    %9.0g                 =1 for michigan
ldurat          float   %9.0g                 log(durat)
afhigh          byte    %9.0g                 afchnge*highearn
lprewage        float   %9.0g                 log(wage)
lage            float   %9.0g                 log(age)
ltotmed         float   %9.0g                 log(totmed); = 0 if totmed < 1
head            byte    %9.0g                 =1 if head injury
neck            byte    %9.0g                 =1 if neck injury
upextr          byte    %9.0g                 =1 if upper extremities injury
trunk           byte    %9.0g                 =1 if trunk injury
lowback         byte    %9.0g                 =1 if lower back injury
lowextr         byte    %9.0g                 =1 if lower extremities injury
occdis          byte    %9.0g                 =1 if occupational disease
manuf           byte    %9.0g                 =1 if manufacturing industry
construc        byte    %9.0g                 =1 if construction industry
highlpre        float   %9.0g                 highearn*lprewage
-------------------------------------------------------------------------------------
Sorted by: 


*/


*(2)
reg ldurat afhigh afchnge highearn if ky ==1
reg ldurat afhigh afchnge highearn if ky ==1, r

/*
      Source |       SS           df       MS      Number of obs   =     5,626
-------------+----------------------------------   F(3, 5622)      =     39.54
       Model |  191.071442         3  63.6904807   Prob > F        =    0.0000
    Residual |   9055.9345     5,622  1.61080301   R-squared       =    0.0207
-------------+----------------------------------   Adj R-squared   =    0.0201
       Total |  9247.00594     5,625  1.64391217   Root MSE        =    1.2692

------------------------------------------------------------------------------
      ldurat |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      afhigh |   .1906012   .0685089     2.78   0.005     .0562973    .3249051
     afchnge |   .0076573   .0447173     0.17   0.864    -.0800058    .0953204
    highearn |   .2564785   .0474464     5.41   0.000     .1634652    .3494918
       _cons |   1.125615   .0307368    36.62   0.000     1.065359    1.185871
------------------------------------------------------------------------------

Linear regression                               Number of obs     =      5,626
                                                F(3, 5622)        =      38.97
                                                Prob > F          =     0.0000
                                                R-squared         =     0.0207
                                                Root MSE          =     1.2692

------------------------------------------------------------------------------
             |               Robust
      ldurat |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      afhigh |   .1906012    .068982     2.76   0.006     .0553699    .3258325
     afchnge |   .0076573   .0440344     0.17   0.862     -.078667    .0939817
    highearn |   .2564785   .0473887     5.41   0.000     .1635785    .3493786
       _cons |   1.125615   .0296226    38.00   0.000     1.067544    1.183687
------------------------------------------------------------------------------


*/



mean ldurat if afchnge ==1 & highearn==1 & ky==1
*1.58
mean ldurat if afchnge ==1 & highearn==0 & ky==1
*1.13
mean ldurat if afchnge ==0 & highearn==1 & ky==1
*1.38
mean ldurat if afchnge ==0 & highearn==0 & ky==1
*1.13

tab afchnge highearn, su(ldurat) means


/*
. mean ldurat if afchnge ==1 & highearn==1 & ky==1

Mean estimation                   Number of obs   =      1,161

--------------------------------------------------------------
             |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
      ldurat |   1.580352   .0380988      1.505602    1.655103
--------------------------------------------------------------

. 
. mean ldurat if afchnge ==1 & highearn==0 & ky==1

Mean estimation                   Number of obs   =      1,527

--------------------------------------------------------------
             |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
      ldurat |   1.133273   .0325802      1.069366    1.197179
--------------------------------------------------------------

. 
. mean ldurat if afchnge ==0 & highearn==1 & ky==1

Mean estimation                   Number of obs   =      1,233

--------------------------------------------------------------
             |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
      ldurat |   1.382094   .0369908      1.309522    1.454666
--------------------------------------------------------------

. 
. mean ldurat if afchnge ==0 & highearn==0 & ky==1

Mean estimation                   Number of obs   =      1,705

--------------------------------------------------------------
             |       Mean   Std. Err.     [95% Conf. Interval]
-------------+------------------------------------------------
      ldurat |   1.125615   .0296208      1.067519    1.183712
--------------------------------------------------------------


*/

*(3)

reg ldurat afhigh afchnge highearn male married i.indust i.injtype if ky ==1, r

/*
Linear regression                               Number of obs     =      5,349
                                                F(14, 5334)       =      16.15
                                                Prob > F          =     0.0000
                                                R-squared         =     0.0412
                                                Root MSE          =     1.2505

------------------------------------------------------------------------------
             |               Robust
      ldurat |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      afhigh |   .2308768   .0697719     3.31   0.001     .0940953    .3676583
     afchnge |   .0106274   .0446625     0.24   0.812    -.0769293    .0981841
    highearn |   .1757598   .0504762     3.48   0.001     .0768057    .2747139
        male |  -.0979407   .0443876    -2.21   0.027    -.1849585    -.010923
     married |   .1220995   .0378622     3.22   0.001     .0478742    .1963248
             |
      indust |
          2  |   .2708676   .0563777     4.80   0.000     .1603442    .3813909
          3  |   .1606709   .0402885     3.99   0.000     .0816889    .2396529
             |
     injtype |
          2  |   .7838129    .170001     4.61   0.000     .4505413    1.117084
          3  |   .3353613   .1010183     3.32   0.001     .1373241    .5333985
          4  |   .6403517   .1083577     5.91   0.000     .4279263    .8527772
          5  |   .5053036   .1035252     4.88   0.000      .302352    .7082552
          6  |   .3936092   .1022061     3.85   0.000     .1932434     .593975
          7  |   .7866121   .2358779     3.33   0.001     .3241949    1.249029
          8  |   .5139003   .1420955     3.62   0.000     .2353351    .7924655
             |
       _cons |   .5713505   .1086737     5.26   0.000     .3583056    .7843954
------------------------------------------------------------------------------


not change, the coefficient of afhigh is statistically significant at 1% level.

*/


*(4)
*small R-squared is caused by increased number of observations and variables. Small R-squared doesn't mean that the regression is invalid. The model is still useful. R-sqaure is more important in prediction but not in estimating sign of coefficient. Here, the regression model is still unbiased.

*(5)
reg ldurat afhigh afchnge highearn if mi==1, r
/*
Linear regression                               Number of obs     =      1,524
                                                F(3, 1520)        =       5.65
                                                Prob > F          =     0.0008
                                                R-squared         =     0.0118
                                                Root MSE          =     1.3765

------------------------------------------------------------------------------
             |               Robust
      ldurat |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      afhigh |   .1919906   .1579768     1.22   0.224     -.117885    .5018662
     afchnge |   .0973808   .0832583     1.17   0.242    -.0659325    .2606941
    highearn |   .1691388   .1070975     1.58   0.114    -.0409358    .3792133
       _cons |   1.412737   .0556012    25.41   0.000     1.303674      1.5218
------------------------------------------------------------------------------
In michigan, the coefiicient of afhigh is not statistically signficant. That means effect of compensation on working duration is not significant 
*/



